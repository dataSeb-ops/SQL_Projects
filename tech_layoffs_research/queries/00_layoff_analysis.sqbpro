<?xml version="1.0" encoding="UTF-8"?><sqlb_project><db path="/Users/bbryant/Documents/GitHub/SQL_Projects/tech_layoffs_research/tech_layoffs.db" readonly="0" foreign_keys="1" case_sensitive_like="0" temp_store="0" wal_autocheckpoint="1000" synchronous="2"/><attached/><window><main_tabs open="structure browser query" current="2"/></window><tab_structure><column_width id="0" width="300"/><column_width id="1" width="0"/><column_width id="2" width="100"/><column_width id="3" width="4063"/><column_width id="4" width="0"/><expanded_item id="0" parent="1"/><expanded_item id="1" parent="1"/><expanded_item id="2" parent="1"/><expanded_item id="3" parent="1"/></tab_structure><tab_browse><table title="SOFR" custom_title="0" dock_id="4" table="4,4:mainSOFR"/><dock_state state="000000ff00000000fd0000000100000002000003de0000032afc0100000006fb000000160064006f0063006b00420072006f007700730065003101000000000000048f0000000000000000fb000000160064006f0063006b00420072006f007700730065003201000000000000048f0000000000000000fb000000160064006f0063006b00420072006f00770073006500330100000000ffffffff0000000000000000fb000000180064006f0063006b00420072006f0077007300650031003501000000000000048f0000000000000000fb000000180064006f0063006b00420072006f007700730065003100380100000000000003de0000000000000000fb000000160064006f0063006b00420072006f00770073006500340100000000ffffffff0000011500ffffff000003de0000000000000004000000040000000800000008fc00000000"/><default_encoding codec=""/><browse_table_settings/></tab_browse><tab_sql><sql name="01_clean_headquarters.sql" filename="/Users/bbryant/Documents/GitHub/SQL_Projects/tech_layoffs_research/queries/01_clean_headquarters.sql">-- Reference to file &quot;/Users/bbryant/Documents/GitHub/SQL_Projects/tech_layoffs_research/queries/01_clean_headquarters.sql&quot; (not supported by this version) --</sql><sql name="06_clean_SOFR">-- CLEAN SOFR DATA, AGGREGATE AVG BY YEAR-QUARTER
CREATE	VIEW SOFR_yearquarters AS
WITH
SOFR_months AS (
	SELECT	20 || CAST(SUBSTR(observation_date, LENGTH(observation_date) - 1, 2) AS INTEGER) AS year,
			CAST(substr(observation_date, 1, instr(observation_date, '/') - 1) AS INTEGER) AS month,
			SOFR_data AS interest_rate
	FROM	SOFR
	WHERE	NOT SOFR_data IS NULL
),

SOFR_yearmonths_quarters AS (
	SELECT	*,
			year * 100 + month AS year_month,
			CASE
			WHEN month BETWEEN 1 AND 3 THEN 'Q1'
			WHEN month BETWEEN 4 AND 6 THEN 'Q2'
			WHEN month BETWEEN 7 AND 9 THEN 'Q3'
			WHEN month BETWEEN 10 AND 12 THEN 'Q4'
			END AS quarter
	FROM	SOFR_months
),

SOFR_yearquarter AS (
	SELECT	*, year || quarter AS yearQ
	FROM	SOFR_yearmonths_quarters
)


SELECT	*, ROUND(AVG(interest_rate), 2) AS q_interest_rate
FROM	SOFR_yearquarter
GROUP	BY yearQ;

SELECT	*
FROM	SOFR_yearquarters;</sql><sql name="01_view_year_quarter_layoffs.sql" filename="/Users/bbryant/Documents/01_view_year_quarter_layoffs.sql">-- Reference to file &quot;/Users/bbryant/Documents/01_view_year_quarter_layoffs.sql&quot; (not supported by this version) --</sql><sql name="02_top_cities_by_layoffs.sql" filename="/Users/bbryant/Documents/GitHub/SQL_Projects/tech_layoffs_research/queries/02_top_cities_by_layoffs.sql">-- Reference to file &quot;/Users/bbryant/Documents/GitHub/SQL_Projects/tech_layoffs_research/queries/02_top_cities_by_layoffs.sql&quot; (not supported by this version) --</sql><sql name="03_top_cities_by_avg_layoffs.sql" filename="/Users/bbryant/Documents/GitHub/SQL_Projects/tech_layoffs_research/queries/03_top_cities_by_avg_layoffs.sql">-- Reference to file &quot;/Users/bbryant/Documents/GitHub/SQL_Projects/tech_layoffs_research/queries/03_top_cities_by_avg_layoffs.sql&quot; (not supported by this version) --</sql><sql name="04_top_cities_by_avg_percent_impacted.sql" filename="/Users/bbryant/Documents/GitHub/SQL_Projects/tech_layoffs_research/queries/04_top_cities_by_avg_percent_impacted.sql">-- Reference to file &quot;/Users/bbryant/Documents/GitHub/SQL_Projects/tech_layoffs_research/queries/04_top_cities_by_avg_percent_impacted.sql&quot; (not supported by this version) --</sql><sql name="05_layoffs_by_quarter.sql*" filename="/Users/bbryant/Documents/GitHub/SQL_Projects/tech_layoffs_research/queries/05_layoffs_by_quarter.sql">-- Reference to file &quot;/Users/bbryant/Documents/GitHub/SQL_Projects/tech_layoffs_research/queries/05_layoffs_by_quarter.sql&quot; (not supported by this version) --</sql><sql name="07_comp_layoffs_interestRates">SELECT	l.year, l.quarter, l.quarter_layoffs AS layoffs,
		s.q_interest_rate AS interest_rate
FROM	layoffs_yearquarters AS l
LEFT	JOIN SOFR_yearquarters AS s
ON		l.yearQ = s.yearQ;</sql><current_tab id="6"/></tab_sql></sqlb_project>
